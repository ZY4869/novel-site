<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>阅读 - 我的书架</title>
  <meta name="description" content="">
  <link rel="stylesheet" href="/assets/css/base.css">
  <link rel="stylesheet" href="/assets/css/theme.css">
  <link rel="stylesheet" href="/assets/css/components.css">
  <link rel="stylesheet" href="/assets/css/pages/read.css">
  <link rel="stylesheet" href="/assets/css/responsive.css">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#d4a574">
</head>
<body>
  <div class="progress-bar" id="progress-bar"></div>
  <div class="navbar">
    <h1><a href="/">📚 我的书架</a></h1>
    <nav>
      <a href="#" id="back-link">返回目录</a>
    </nav>
  </div>
  <div class="reader" id="reader-area">
    <div class="breadcrumb" id="breadcrumb"></div>
    <div id="content" class="loading">加载中...</div>
  </div>

  <!-- 底部工具栏 -->
  <div class="reader-bottom-bar" id="bottom-bar">
    <button class="bar-btn" id="bar-prev" title="上一章"><span class="bar-icon">◀</span>上一章</button>
    <button class="bar-btn" id="bar-toc" title="目录"><span class="bar-icon">☰</span>目录</button>
    <button class="bar-btn" id="bar-bookmark" title="书签"><span class="bar-icon" id="bookmark-icon">☆</span>书签</button>
    <button class="bar-btn" id="bar-settings" title="设置"><span class="bar-icon">⚙</span>设置</button>
    <button class="bar-btn" id="bar-immersive" title="沉浸模式"><span class="bar-icon">🔲</span>沉浸</button>
    <button class="bar-btn" id="bar-next" title="下一章"><span class="bar-icon">▶</span>下一章</button>
  </div>

  <!-- 章节目录浮层 -->
  <div class="toc-overlay" id="toc-overlay">
    <div class="toc-panel">
      <h3 id="toc-title">目录</h3>
      <ul class="toc-list" id="toc-list"></ul>
    </div>
  </div>

  <!-- 设置面板 -->
  <div class="settings-overlay" id="settings-overlay">
    <div class="settings-panel">
      <h3>阅读设置<button class="close-btn" id="close-settings">✕</button></h3>
      <div class="setting-row">
        <span class="setting-label">主题</span>
        <div class="theme-options" id="theme-options">
          <div class="theme-dot" data-theme="light" title="默认"></div>
          <div class="theme-dot" data-theme="dark" title="夜间"></div>
          <div class="theme-dot" data-theme="green" title="护眼"></div>
          <div class="theme-dot" data-theme="sepia" title="羊皮纸"></div>
          <div class="theme-dot" data-theme="blue" title="淡蓝"></div>
        </div>
      </div>
      <div class="setting-row">
        <span class="setting-label">字体</span>
        <div class="font-options" id="font-options">
          <div class="font-option" data-font="'Georgia','Noto Serif SC','Source Han Serif CN',serif" style="font-family:Georgia,serif">宋体/衬线</div>
          <div class="font-option" data-font="'PingFang SC','Microsoft YaHei','Noto Sans SC',sans-serif" style="font-family:sans-serif">黑体/无衬线</div>
          <div class="font-option" data-font="'KaiTi','STKaiti','AR PL UKai CN',serif" style="font-family:KaiTi,STKaiti,serif">楷体</div>
          <div class="font-option" data-font="'FangSong','STFangsong',serif" style="font-family:FangSong,STFangsong,serif">仿宋</div>
        </div>
      </div>
      <div class="setting-row">
        <span class="setting-label">字号</span>
        <div class="slider-row">
          <span style="font-size:12px">A</span>
          <input type="range" id="font-size-slider" min="14" max="28" step="1">
          <span style="font-size:20px">A</span>
          <span class="slider-val" id="font-size-val">17px</span>
        </div>
      </div>
      <div class="setting-row">
        <span class="setting-label">行距</span>
        <div class="slider-row">
          <span style="font-size:12px">紧</span>
          <input type="range" id="line-height-slider" min="1.5" max="3" step="0.1">
          <span style="font-size:12px">松</span>
          <span class="slider-val" id="line-height-val">2.0</span>
        </div>
      </div>
      <div class="setting-row">
        <span class="setting-label">页面宽度</span>
        <div class="slider-row">
          <span style="font-size:12px">窄</span>
          <input type="range" id="width-slider" min="500" max="960" step="20">
          <span style="font-size:12px">宽</span>
          <span class="slider-val" id="width-val">720px</span>
        </div>
      </div>
      <div class="setting-row">
        <span class="setting-label">阅读模式</span>
        <div class="mode-options" id="mode-options">
          <div class="mode-option" data-mode="scroll">📜 滚动</div>
          <div class="mode-option" data-mode="pager">📖 翻页</div>
        </div>
      </div>
    </div>
  </div>

  <button class="back-to-top has-bar" id="back-top">↑</button>

  <!-- 翻页模式：点击区域 + 页码 -->
	  <div class="pager-tap-left" id="pager-tap-left" style="display:none"></div>
	  <div class="pager-tap-right" id="pager-tap-right" style="display:none"></div>
	  <div class="pager-indicator" id="pager-indicator"></div>
	  <div class="immersive-hint" id="immersive-hint">点击中央或按 Esc 退出沉浸模式</div>

	  <!-- 批注：浮动按钮（PC+移动端统一） -->
	  <div id="anno-float-btn" class="anno-float-btn">📝</div>

  <!-- 批注：输入框 -->
  <div id="anno-editor" class="anno-editor" style="display:none">
    <div class="anno-editor-quote" id="anno-quote"></div>
    <div class="anno-input-wrap">
      <textarea id="anno-input" maxlength="500" placeholder="写下你的批注..."></textarea>
      <span class="anno-char-count"><span id="anno-char-num">0</span>/500</span>
    </div>
    <div class="anno-editor-footer">
      <button id="anno-vis-btn" class="anno-vis-btn" type="button">🔒 仅自己可见</button>
      <div class="anno-editor-actions">
        <button class="btn btn-sm" id="anno-cancel" type="button">取消</button>
        <button class="btn btn-sm anno-submit-btn" id="anno-submit" type="button">发表</button>
      </div>
    </div>
    <div class="anno-editor-hint">Ctrl+Enter 发表 · Esc 取消</div>
  </div>

	  <!-- 批注：查看弹窗 -->
	  <div id="anno-popover" class="anno-popover" style="display:none"></div>
	  <script type="module" src="/assets/js/pages/read.js"></script>
	</body>
</html>

